<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•éŠæˆ²ï¼šæ§“æ¡¿åŸç†æ˜¯æ€æ¨£çš„ï¼Ÿ(ä¿®æ­£ç‰ˆ)</title>
    <style>
        :root {
            --primary: #4A90E2;
            --success: #66BB6A;
            --danger: #EF5350;
            --warning: #FFA726;
            --bg: #F0F4F8;
            --text: #333;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            width: 95%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            margin: 20px;
            padding: 20px;
            text-align: center;
            overflow: hidden;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            background: #ddd;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .scene {
            position: relative;
            height: 350px;
            background: linear-gradient(to bottom, #E3F2FD 70%, #81C784 70%);
            border-radius: 15px;
            border: 2px solid #ccc;
            margin-bottom: 20px;
            overflow: hidden;
            touch-action: none;
        }

        .fulcrum {
            position: absolute;
            bottom: 30%;
            left: 50%;
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 40px solid #FF7043;
            z-index: 2;
        }
        
        .fulcrum-label {
            position: absolute;
            bottom: -25px;
            left: -20px;
            width: 80px;
            text-align: center;
            font-weight: bold;
            color: #D84315;
            font-size: 14px;
        }

        .beam {
            position: absolute;
            bottom: calc(30% + 40px);
            left: 50%;
            width: 500px;
            height: 10px;
            background: #5D4037;
            border-radius: 5px;
            transform-origin: center center;
            transition: transform 0.5s cubic-bezier(0.4, 2.5, 0.4, 0.8); /* æœ‰å½ˆæ€§çš„å‹•ç•« */
            z-index: 3;
            margin-left: -250px;
        }

        .object {
            position: absolute;
            bottom: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: left 0.3s;
            cursor: grab;
        }

        .dad { font-size: 60px; filter: drop-shadow(2px 2px 0 rgba(0,0,0,0.2)); }
        .girl { font-size: 40px; filter: drop-shadow(2px 2px 0 rgba(0,0,0,0.2)); }
        
        .block-stack {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
        }
        
        .block {
            width: 30px;
            height: 15px;
            border: 1px solid rgba(0,0,0,0.2);
            border-radius: 2px;
        }
        .block.red { background: #EF5350; }
        .block.blue { background: #42A5F5; }

        .marker {
            position: absolute;
            top: 15px;
            font-size: 12px;
            color: #fff;
            background: rgba(0,0,0,0.3);
            padding: 2px 5px;
            border-radius: 4px;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .control-group {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #eee;
            width: 100%;
            max-width: 600px;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 25px;
            font-size: 1.1rem;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 0 #1565C0;
            transition: transform 0.1s;
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .btn-reset { background: var(--warning); box-shadow: 0 4px 0 #E65100; }
        .btn-add { background: var(--success); box-shadow: 0 4px 0 #2E7D32; font-size: 1.2rem;}

        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            background: #E8F5E9;
            border: 2px solid #81C784;
            border-radius: 10px;
            display: none;
            animation: popIn 0.5s ease;
        }

        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .result-table th, .result-table td {
            border: 1px solid #ccc;
            padding: 8px;
        }
        .result-table .highlight {
            background-color: #FFF9C4;
            font-weight: bold;
            color: #D84315;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        input[type=range] {
            width: 80%;
            margin: 10px 0;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ—ï¸ å°å°å¤§åŠ›å£«ï¼šæ§“æ¡¿å¯¦é©—å®¤</h1>
    
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchMode('seesaw')">ç¬¬ä¸€é—œï¼šè¹ºè¹ºæ¿ (P.18)</button>
        <button class="tab-btn" onclick="switchMode('ruler')">ç¬¬äºŒé—œï¼šç©æœ¨å¯¦é©— (P.19)</button>
    </div>

    <div id="mode-seesaw">
        <div class="scene">
            <div class="beam" id="beam1">
                <div class="fulcrum" style="bottom: -40px;">
                    <div class="fulcrum-label">æ”¯é»</div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <h3>ğŸ‘¨ çˆ¸çˆ¸å¤ªé‡äº†ï¼</h3>
                <p>è«‹æ‹–å‹•æ»‘æ¡¿ï¼Œç§»å‹•çˆ¸çˆ¸çš„ä½ç½®è®“ä»–å’Œå¦¹å¦¹å¹³è¡¡ã€‚</p>
                <label>çˆ¸çˆ¸çš„ä½ç½®ï¼š<span id="dad-pos-val">é </span></label><br>
                <input type="range" id="dad-slider" min="10" max="230" value="230" step="10">
            </div>
            <div id="seesaw-feedback" class="feedback-box"></div>
        </div>
    </div>

    <div id="mode-ruler" class="hidden">
        <div class="scene">
            <div class="beam" id="beam2" style="background: #FFF3E0; border: 2px solid #8D6E63;">
                <div class="fulcrum" style="bottom: -40px; border-bottom-color: #7E57C2;">
                     <div class="fulcrum-label" style="color: #7E57C2;">æ”¯é»</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="control-group" style="background: #E3F2FD;">
                <h3>ğŸ§ª å¯¦é©—æ­¥é©Ÿ</h3>
                <p>1. é¸æ“‡æˆ‘å€‘æ–½åŠ›çš„ä½ç½®ï¼ˆè—è‰²ç©æœ¨ï¼‰</p>
                <div>
                    <input type="radio" name="effortPos" id="posA1" value="A1" checked onchange="resetRuler()"><label for="posA1" style="font-weight:bold; color:var(--primary)"> A1 (æœ€é )</label>
                    <input type="radio" name="effortPos" id="posA2" value="A2" onchange="resetRuler()"><label for="posA2" style="font-weight:bold; color:var(--text)"> A2 (ä¸­é–“)</label>
                    <input type="radio" name="effortPos" id="posA3" value="A3" onchange="resetRuler()"><label for="posA3" style="font-weight:bold; color:var(--danger)"> A3 (æœ€è¿‘)</label>
                </div>
                
                <hr style="border:0; border-top:1px dashed #ccc; margin: 15px 0;">
                
                <p>2. å¢åŠ ç©æœ¨ç›´åˆ°æœ¨å°ºå¹³è¡¡</p>
                <div style="display:flex; justify-content: center; align-items: center; gap: 20px;">
                    <div style="text-align:center;">
                        <span style="font-size: 2rem; display:block;" id="effort-count">0</span>
                        <small>åŠ›é»ç©æœ¨</small>
                    </div>
                    <button class="btn btn-add" onclick="addBlock()">â• æ”¾ä¸€å¡Šç©æœ¨</button>
                    <button class="btn btn-reset" onclick="resetRuler()">ğŸ”„ é‡ç½®</button>
                </div>
            </div>

            <div id="ruler-result" class="feedback-box" style="width: 100%; max-width: 600px;">
                </div>
        </div>
    </div>

</div>

<script>
    // --- Global State ---
    let currentMode = 'seesaw';

    // Seesaw Config
    const seesawState = {
        dadWeight: 80,
        girlWeight: 30,
        girlPos: 230,
        dadPos: 230,
        balanced: false
    };

    // Ruler Config
    const rulerState = {
        loadWeight: 6, // 6 blocks
        loadPos: 'B2',
        effortPos: 'A1',
        effortWeight: 0,
        state: 'heavy' // heavy, balanced, lifted
    };

    // Position mappings (distance from center)
    const positions = {
        'A1': 220, 
        'A2': 110,
        'A3': 60,
        'B2': 110
    };

    // --- Initialization ---
    function init() {
        const dadSlider = document.getElementById('dad-slider');
        dadSlider.addEventListener('input', (e) => {
            seesawState.dadPos = parseInt(e.target.value);
            updateSeesaw();
        });
        updateSeesaw();
        resetRuler();
    }

    function switchMode(mode) {
        document.getElementById('mode-seesaw').classList.add('hidden');
        document.getElementById('mode-ruler').classList.add('hidden');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        
        document.getElementById(`mode-${mode}`).classList.remove('hidden');
        if(mode === 'seesaw') document.querySelector('.tab-btn:first-child').classList.add('active');
        else document.querySelector('.tab-btn:last-child').classList.add('active');
        
        currentMode = mode;
    }

    // --- Seesaw Logic ---
    function updateSeesaw() {
        const beam = document.getElementById('beam1');
        const feedback = document.getElementById('seesaw-feedback');
        const label = document.getElementById('dad-pos-val');

        beam.innerHTML = `
            <div class="fulcrum" style="bottom: -40px;"><div class="fulcrum-label">æ”¯é»</div></div>
            <div class="object" style="left: ${250 + seesawState.girlPos}px;">
                <span class="girl">ğŸ‘§</span>
                <span style="font-size:12px; font-weight:bold; color:#E91E63">é‡é»</span>
            </div>
            <div class="object" style="left: ${250 - seesawState.dadPos}px;">
                <span class="dad">ğŸ‘¨</span>
                <span style="font-size:12px; font-weight:bold; color:#1976D2">åŠ›é»</span>
            </div>
        `;

        const torqueL = seesawState.dadWeight * seesawState.dadPos;
        const torqueR = seesawState.girlWeight * seesawState.girlPos;

        let rotation = 0;
        let message = "";
        let color = "";

        if(seesawState.dadPos > 150) label.innerText = "é  (A1)";
        else if(seesawState.dadPos > 80) label.innerText = "ä¸­ (A2)";
        else label.innerText = "è¿‘ (A3)";

        if (Math.abs(torqueL - torqueR) < 1000) {
            rotation = 0;
            message = "ğŸ‰ æˆåŠŸå¹³è¡¡ï¼<br>çˆ¸çˆ¸é è¿‘æ”¯é»ï¼Œç¸®çŸ­äº†ã€ŒåŠ›è‡‚ã€ï¼Œå°±èƒ½å’Œè¼•çš„å¦¹å¦¹å¹³è¡¡ã€‚";
            color = "#E8F5E9";
            feedback.style.display = 'block';
        } else if (torqueL > torqueR) {
            rotation = -15; 
            message = "âŒ é‚„æ˜¯å¤ªé‡ï¼<br>çˆ¸çˆ¸ï¼ˆåŠ›é»ï¼‰é›¢æ”¯é»å¤ªé äº†ã€‚è©¦è‘—æŠŠçˆ¸çˆ¸å¾€<b>ä¸­é–“</b>æ‹‰ã€‚";
            color = "#FFEBEE";
            feedback.style.display = 'block';
        } else {
            rotation = 15; 
            message = "âŒ å¤ªè¼•äº†ï¼<br>çˆ¸çˆ¸é›¢æ”¯é»å¤ªè¿‘äº†ï¼ŒåŠ›çŸ©ä¸å¤ ã€‚";
            color = "#FFF3E0";
            feedback.style.display = 'block';
        }

        beam.style.transform = `rotate(${rotation}deg)`;
        feedback.innerHTML = message;
        feedback.style.backgroundColor = color;
    }


    // --- Ruler Logic (Updated) ---
    function resetRuler() {
        const radios = document.getElementsByName('effortPos');
        for (let r of radios) {
            if (r.checked) rulerState.effortPos = r.value;
        }
        rulerState.effortWeight = 0;
        rulerState.state = 'heavy';
        
        document.getElementById('effort-count').innerText = 0;
        document.getElementById('ruler-result').style.display = 'none';
        
        renderRuler();
    }

    function addBlock() {
        rulerState.effortWeight++;
        document.getElementById('effort-count').innerText = rulerState.effortWeight;
        renderRuler();
    }

    function renderRuler() {
        const beam = document.getElementById('beam2');
        
        // --- Physics Calculation (Fixed) ---
        // Load Torque (Right)
        const loadTorque = rulerState.loadWeight * positions['B2']; // 6 * 110 = 660
        
        // Effort Torque (Left)
        const effortTorque = rulerState.effortWeight * positions[rulerState.effortPos];
        
        let rotation = 15; // Default: tilts right
        
        // Determine State
        if (effortTorque === loadTorque) {
            rotation = 0; // Balanced!
            rulerState.state = 'balanced';
            showRulerResult(); // Show success on balance
        } else if (effortTorque > loadTorque) {
            rotation = -15; // Lifted (tilts left)
            rulerState.state = 'lifted';
            showRulerResult();
        } else {
            rotation = 15; // Not enough force
            rulerState.state = 'heavy';
            document.getElementById('ruler-result').style.display = 'none'; // Hide result if not balanced yet
        }

        beam.style.transform = `rotate(${rotation}deg)`;

        // --- Render Visuals ---
        const loadPixel = 250 + positions['B2']; 
        const effortPixel = 250 - positions[rulerState.effortPos];

        let loadBlocksHTML = '';
        for(let i=0; i<6; i++) loadBlocksHTML += `<div class="block red"></div>`;

        let effortBlocksHTML = '';
        for(let i=0; i<rulerState.effortWeight; i++) effortBlocksHTML += `<div class="block blue"></div>`;

        const marksHTML = `
            <div class="marker" style="left: 30px;">A1</div>
            <div class="marker" style="left: 140px;">A2</div>
            <div class="marker" style="left: 190px;">A3</div>
            <div class="marker" style="right: 30px;">B4</div>
            <div class="marker" style="right: 140px;">B2</div>
            <div class="fulcrum" style="bottom: -40px; border-bottom-color: #7E57C2;">
                <div class="fulcrum-label" style="color: #7E57C2;">æ”¯é»</div>
            </div>
        `;

        beam.innerHTML = marksHTML + `
            <div class="object" style="left: ${loadPixel}px;">
                <div class="block-stack">${loadBlocksHTML}</div>
                <span style="font-size:12px; font-weight:bold; color:#D32F2F">é‡é» (6å¡Š)</span>
            </div>
            <div class="object" style="left: ${effortPixel}px;">
                <div class="block-stack">${effortBlocksHTML}</div>
                <span style="font-size:12px; font-weight:bold; color:#1976D2">åŠ›é»</span>
            </div>
        `;
    }

    function showRulerResult() {
        const box = document.getElementById('ruler-result');
        const pos = rulerState.effortPos;
        const count = rulerState.effortWeight;
        const state = rulerState.state;
        
        let title = "";
        let conclusion = "";
        let bgColor = "#E8F5E9"; // Greenish for success
        
        if (state === 'balanced') {
            title = "âš–ï¸ é”æˆå¹³è¡¡ï¼";
            if(pos === 'A2') {
                 conclusion = "è·é›¢ç›¸åŒæ™‚ï¼Œç©æœ¨æ•¸é‡ä¹Ÿç›¸åŒï¼ˆ6å¡Šï¼‰ã€‚é€™æ˜¯ä¸çœåŠ›ä¹Ÿä¸è²»åŠ›çš„ç‹€æ³ã€‚";
            } else if (pos === 'A1') {
                 conclusion = "é›–ç„¶å¹³è¡¡äº†ï¼Œä½†å¦‚æœä½ å†åŠ ä¸€å¡Šå°±èƒ½è¼•é¬†ç¿¹èµ·å®ƒï¼ˆçœåŠ›ï¼‰ã€‚";
            } else {
                 conclusion = "çµ‚æ–¼å¹³è¡¡äº†ï¼Œä½†ç”¨äº†å¥½å¤šç©æœ¨ï¼ˆè²»åŠ›ï¼‰ã€‚";
            }
        } else if (state === 'lifted') {
            title = "ğŸš€ æˆåŠŸç¿¹èµ·é‡ç‰©ï¼";
            conclusion = "åŠ›çŸ©å·²ç¶“è¶…éé‡ç‰©äº†ã€‚";
        }

        // Table Highlighting Logic
        box.innerHTML = `
            <h3 style="margin-top:0">${title}</h3>
            <p>ä½¿ç”¨äº† <b>${count}</b> å¡Šç©æœ¨ã€‚</p>
            <p>${conclusion}</p>
            
            <table class="result-table">
                <tr>
                    <th>è·é›¢æ¯”è¼ƒ</th>
                    <th>çµæœ</th>
                </tr>
                <tr class="${pos === 'A3' ? 'highlight' : ''}">
                    <td>åŠ›è‡‚ (a) < é‡è‡‚ (b)</td>
                    <td>è²»åŠ› (éœ€è¦æ›´å¤šç©æœ¨)</td>
                </tr>
                <tr class="${pos === 'A2' ? 'highlight' : ''}">
                    <td>åŠ›è‡‚ (a) = é‡è‡‚ (b)</td>
                    <td>ä¸çœä¹Ÿä¸è²»</td>
                </tr>
                <tr class="${pos === 'A1' ? 'highlight' : ''}">
                    <td>åŠ›è‡‚ (a) > é‡è‡‚ (b)</td>
                    <td>çœåŠ› (åªéœ€å°‘é‡ç©æœ¨)</td>
                </tr>
            </table>
        `;
        box.style.display = 'block';
    }

    init();

</script>

</body>
</html>
